2024-04-02 19:31:46.349351+03:00 jdbc[3]: exception
org.h2.jdbc.JdbcSQLDataException: Value too long for column "STREET CHARACTER VARYING(30)": "'eb.kmdfnvblkdfgnblkjdfgnblkjdfnbldkfgjnbdlfgkjnb' (48)"; SQL statement:
update USERS set AFM=?,city=?,email=?,name=?,password=?,phone=?,street=?,zipcode=?,expirationDate=?,holderName=?,number=?,surname=? where id=? [22001-224]
2024-04-12 02:53:39.473928+03:00 database: flush
org.h2.message.DbException: General error: "org.h2.mvstore.MVStoreException: The file is locked: C:/Users/VGini/OneDrive/Υπολογιστής/Βαγγέλης/carRental/team4-ft-2023-24/UserManagementMicroservice/test1.mv.db [2.2.224/7]" [50000-224]
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.message.DbException.convert(DbException.java:407)
	at org.h2.mvstore.db.Store.lambda$new$0(Store.java:122)
	at org.h2.mvstore.MVStore.handleException(MVStore.java:1546)
	at org.h2.mvstore.MVStore.panic(MVStore.java:371)
	at org.h2.mvstore.MVStore.<init>(MVStore.java:291)
	at org.h2.mvstore.MVStore$Builder.open(MVStore.java:2035)
	at org.h2.mvstore.db.Store.<init>(Store.java:133)
	at org.h2.engine.Database.<init>(Database.java:326)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:343)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at io.agroal.pool.ConnectionFactory.createConnection(ConnectionFactory.java:226)
	at io.agroal.pool.ConnectionPool$CreateConnectionTask.call(ConnectionPool.java:536)
	at io.agroal.pool.ConnectionPool$CreateConnectionTask.call(ConnectionPool.java:517)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at io.agroal.pool.util.PriorityScheduledExecutor.beforeExecute(PriorityScheduledExecutor.java:75)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: General error: "org.h2.mvstore.MVStoreException: The file is locked: C:/Users/VGini/OneDrive/Υπολογιστής/Βαγγέλης/carRental/team4-ft-2023-24/UserManagementMicroservice/test1.mv.db [2.2.224/7]" [50000-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	... 23 more
Caused by: org.h2.mvstore.MVStoreException: The file is locked: C:/Users/VGini/OneDrive/Υπολογιστής/Βαγγέλης/carRental/team4-ft-2023-24/UserManagementMicroservice/test1.mv.db [2.2.224/7]
	at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:996)
	at org.h2.mvstore.SingleFileStore.lockFileChannel(SingleFileStore.java:143)
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:117)
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:81)
	at org.h2.mvstore.MVStore.<init>(MVStore.java:286)
	... 17 more
2024-04-12 02:53:40.313753+03:00 database: flush
org.h2.message.DbException: General error: "org.h2.mvstore.MVStoreException: The file is locked: C:/Users/VGini/OneDrive/Υπολογιστής/Βαγγέλης/carRental/team4-ft-2023-24/UserManagementMicroservice/test1.mv.db [2.2.224/7]" [50000-224]
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.message.DbException.convert(DbException.java:407)
	at org.h2.mvstore.db.Store.lambda$new$0(Store.java:122)
	at org.h2.mvstore.MVStore.handleException(MVStore.java:1546)
	at org.h2.mvstore.MVStore.panic(MVStore.java:371)
	at org.h2.mvstore.MVStore.<init>(MVStore.java:291)
	at org.h2.mvstore.MVStore$Builder.open(MVStore.java:2035)
	at org.h2.mvstore.db.Store.<init>(Store.java:133)
	at org.h2.engine.Database.<init>(Database.java:326)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:343)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at io.agroal.pool.ConnectionFactory.createConnection(ConnectionFactory.java:226)
	at io.agroal.pool.ConnectionPool$CreateConnectionTask.call(ConnectionPool.java:536)
	at io.agroal.pool.ConnectionPool$CreateConnectionTask.call(ConnectionPool.java:517)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at io.agroal.pool.util.PriorityScheduledExecutor.beforeExecute(PriorityScheduledExecutor.java:75)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: General error: "org.h2.mvstore.MVStoreException: The file is locked: C:/Users/VGini/OneDrive/Υπολογιστής/Βαγγέλης/carRental/team4-ft-2023-24/UserManagementMicroservice/test1.mv.db [2.2.224/7]" [50000-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	... 23 more
Caused by: org.h2.mvstore.MVStoreException: The file is locked: C:/Users/VGini/OneDrive/Υπολογιστής/Βαγγέλης/carRental/team4-ft-2023-24/UserManagementMicroservice/test1.mv.db [2.2.224/7]
	at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:996)
	at org.h2.mvstore.SingleFileStore.lockFileChannel(SingleFileStore.java:143)
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:117)
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:81)
	at org.h2.mvstore.MVStore.<init>(MVStore.java:286)
	... 17 more
2024-05-06 16:59:11.599815+03:00 jdbc[3]: exception
org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "USERS" not found (this database is empty); SQL statement:
delete from USERS;
delete from CHARGING_POLICIES;

-- insert customers
insert into USERS (id, name, email, password, phone, street, city, zipcode, AFM, type, surname, number, expirationDate, holderName) values (1000, 'ΙΩΑΝΝΗΣ','evangellou@gmail.com','johnjohn','6941603677','ΛΕΥΚΑΔΟΣ 22','ΑΘΗΝΑ','35896','166008282','Customer','ΕΥΑΓΓΕΛΟΥ','7894665213797564','2027-11-26','ΙΩΑΝΝΗΣ ΕΥΑΓΓΕΛΟΥ');
insert into USERS (id, name, email, password, phone, street, city, zipcode, AFM, type, surname, number, expirationDate, holderName) values (1001, 'ΝΙΚΟΣ','nick7@yahoo.gr','olympiakos','6924567813','ΜΕΘΟΝΗΣ 6','ΠΕΙΡΑΙΑΣ','18545','054893175','Customer','ΠΑΠΑΔΗΜΗΤΡΙΟΥ','1645923557481658','2026-08-05','ΝΙΚΟΣ ΠΑΠΑΔΗΜΗΤΡΙΟΥ');

-- insert charging policies

insert into CHARGING_POLICIES (id) values (1500);
insert into CHARGING_POLICIES (id) values (1501);

-- insert into sub tables of charging policies

insert into POLICY_DAMAGE_COST (policy_id, damageType_key, damageType) values (1500, 'Glasses', 50);
insert into POLICY_DAMAGE_COST (policy_id, damageType_key, damageType) values (1500, 'Machine', 30);
insert into POLICY_DAMAGE_COST (policy_id, damageType_key, damageType) values (1500, 'Scratches', 90);
insert into POLICY_DAMAGE_COST (policy_id, damageType_key, damageType) values (1500, 'Interior', 40);
insert into POLICY_DAMAGE_COST (policy_id, damageType_key, damageType) values (1500, 'Tyres', 60);
insert into POLICY_DAMAGE_COST (policy_id, damageType_key, damageType) values (1500, 'NoDamage', 0);
insert into POLICY_DAMAGE_COST (policy_id, damageType_key, damageType) values (1501, 'Glasses', 30);
insert into POLICY_DAMAGE_COST (policy_id, damageType_key, damageType) values (1501, 'Machine', 90);
insert into POLICY_DAMAGE_COST (policy_id, damageType_key, damageType) values (1501, 'Scratches', 40);
insert into POLICY_DAMAGE_COST (policy_id, damageType_key, damageType) values (1501, 'Interior', 50);
insert into POLICY_DAMAGE_COST (policy_id, damageType_key, damageType) values (1501, 'Tyres', 70);
insert into POLICY_DAMAGE_COST (policy_id, damageType_key, damageType) values (1501, 'NoDamage', 0);

insert into POLICY_MILEAGE_SCALE (policy_id, mileageScale_key, mileageScale) values (1500, 100, 0.1);
insert into POLICY_MILEAGE_SCALE (policy_id, mileageScale_key, mileageScale) values (1500, 200, 0.2);
insert into POLICY_MILEAGE_SCALE (policy_id, mileageScale_key, mileageScale) values (1500, 300, 0.3);
insert into POLICY_MILEAGE_SCALE (policy_id, mileageScale_key, mileageScale) values (1501, 150, 0.15);
insert into POLICY_MILEAGE_SCALE (policy_id, mileageScale_key, mileageScale) values (1501, 250, 0.25);
insert into POLICY_MILEAGE_SCALE (policy_id, mileageScale_key, mileageScale) values (1501, 350, 0.35);

-- insert companies

insert into USERS (id, name, email, password, phone, street, city, zipcode, AFM, type, IBAN, income_amount, income_currency, damage_cost_amount, damage_cost_currency, policy_id) values (2000, 'AVIS','avis@gmail.com', 'password123', '2104578965','ΠΑΤΗΣΙΩΝ 37','ΑΘΗΝΑ','12478','163498317','Company','GR2514526358789654', 0, 'EUR', 0, 'EUR', 1500);
insert into USERS (id, name, email, password, phone, street, city, zipcode, AFM, type, IBAN, income_amount, income_currency, damage_cost_amount, damage_cost_currency, policy_id) values (2001, 'SPEED','speed@gmail.com', 'ilovecookies', '2644125415','ΛΕΥΚΩΣΙΑΣ 66','ΠΑΤΡΑ','34785','999641227','Company','GR3687254378963625', 0, 'EUR', 0, 'EUR', 1501);

 [42104-224]
2024-05-06 17:22:05.498198+03:00 jdbc[3]: exception
org.h2.jdbc.JdbcSQLNonTransientException: The object is already closed [90007-224]
2024-05-06 17:22:05.579818+03:00 jdbc[3]: exception
org.h2.jdbc.JdbcSQLNonTransientException: The object is already closed [90007-224]
2024-05-17 18:05:56.843566+03:00 database: flush
org.h2.message.DbException: General error: "org.h2.mvstore.MVStoreException: The file is locked: /home/lef/Desktop/dev/team4-ft-2023-24/UserManagementMicroservice/test1.mv.db [2.2.224/7]" [50000-224]
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.message.DbException.convert(DbException.java:407)
	at org.h2.mvstore.db.Store.lambda$new$0(Store.java:122)
	at org.h2.mvstore.MVStore.handleException(MVStore.java:1546)
	at org.h2.mvstore.MVStore.panic(MVStore.java:371)
	at org.h2.mvstore.MVStore.<init>(MVStore.java:291)
	at org.h2.mvstore.MVStore$Builder.open(MVStore.java:2035)
	at org.h2.mvstore.db.Store.<init>(Store.java:133)
	at org.h2.engine.Database.<init>(Database.java:326)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:343)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.util.JdbcUtils.getConnection(JdbcUtils.java:288)
	at org.h2.server.web.WebServer.getConnection(WebServer.java:811)
	at org.h2.server.web.WebApp.login(WebApp.java:1039)
	at org.h2.server.web.WebApp.process(WebApp.java:227)
	at org.h2.server.web.WebApp.processRequest(WebApp.java:177)
	at org.h2.server.web.WebThread.process(WebThread.java:154)
	at org.h2.server.web.WebThread.run(WebThread.java:103)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: General error: "org.h2.mvstore.MVStoreException: The file is locked: /home/lef/Desktop/dev/team4-ft-2023-24/UserManagementMicroservice/test1.mv.db [2.2.224/7]" [50000-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	... 22 more
Caused by: org.h2.mvstore.MVStoreException: The file is locked: /home/lef/Desktop/dev/team4-ft-2023-24/UserManagementMicroservice/test1.mv.db [2.2.224/7]
	at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:996)
	at org.h2.mvstore.SingleFileStore.lockFileChannel(SingleFileStore.java:143)
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:117)
	at org.h2.mvstore.SingleFileStore.open(SingleFileStore.java:81)
	at org.h2.mvstore.MVStore.<init>(MVStore.java:286)
	... 16 more
